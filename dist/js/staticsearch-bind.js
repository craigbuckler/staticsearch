import{staticsearch as f}from"./__SSDIR__/staticsearch.js";var d="q",E=500;function S(){return new URLSearchParams(location.search).get(d)||""}function m(t,a){let e=new URL(location);t?e.searchParams.set(d,t):e.searchParams.delete(d),e.hash=a||"",history.replaceState({},"",e.href)}function b(t){t.name&&(d=t.name);let a=S();a&&(t.value=a,c(a));let e;t.addEventListener("input",r=>{let n=r.target.value;clearTimeout(e),e=setTimeout(()=>c(n),E)},!1);function c(r){r.length<3||f.find(r).then(n=>{document.dispatchEvent(new CustomEvent("staticsearch:find",{bubbles:!0,detail:{search:r,result:n}}))})}}function v(t,a,e,c){let r="";t.addEventListener("click",i=>{let s=i.target.closest("a");s&&r&&m(r,s.id)}),e||(e=document.createElement("template"),e.innerHTML=`
      <p part="resultmessage"><span part="resultcount">0</span> found for <span part="searchterm"></span>&hellip;</p>
    `),c||(c=document.createElement("template"),c.innerHTML=`
      <li part="item"><a part="link">
        <h2 part="title"></h2>
        <p part="description"></p>
      </a></li>
    `),document.addEventListener("staticsearch:find",i=>{r=i.detail.search;let s=i.detail.result;t.innerHTML="";let l=e.content.cloneNode(!0);n(l,"resultcount",s.length),n(l,"searchterm",r);let p=document.createElement("ol");p.setAttribute("part","searchresult"),s.forEach((o,h)=>{if(a&&h>=a)return;let u=c.content.cloneNode(!0);n(u,"link",null,{href:o.url,id:`staticsearchresult-${o.id}`}),n(u,"title",o.title),n(u,"description",o.description),p.appendChild(u)}),t.appendChild(l),t.appendChild(p),t.scrollTop=0},!1);function n(i,s,l,p={}){i.querySelectorAll(`[part="${s}"]`).forEach(o=>{l&&(o.textContent=l);for(let[h,u]of Object.entries(p))o.setAttribute(h,u)})}}export{b as staticSearchInput,S as staticSearchQuery,v as staticSearchResult,m as staticSearchSetQuery};
