import{staticsearch as C}from"./__SSDIR__/staticsearch.js";var l="q",L=600;function y(){return new URLSearchParams(location.search).get(l)||""}function q(t,c){let e=new URL(location);t?e.searchParams.set(l,t):e.searchParams.delete(l),e.hash=c||"",history.replaceState({},"",e.href)}function x(t){t.name&&(l=t.name);let c=y();c&&(t.value=c,n(c));let e;t.addEventListener("input",r=>{clearTimeout(e),e=setTimeout(()=>n(r.target.value),L)},!1);function n(r){r.length<3||C.find(r).then(s=>{t.dispatchEvent(new CustomEvent("staticsearch:find",{bubbles:!0,detail:{search:r,result:s}}))})}}function g(t,c,e,n){let r="";t.addEventListener("click",s=>{let a=s.target.closest("a");a&&r&&q(r,a.id)}),e||(e=document.createElement("template"),e.innerHTML=`
      <p class="searchmessage"><span class="searchcount">0</span> found for "<em class="searchterm">term</em>"&hellip;</p>
    `),n||(n=document.createElement("template"),n.innerHTML=`
      <li class="searchitem"><a class="url">
        <h2 class="title"></h2>
        <p class="description"></p>
      </a></li>
    `),document.addEventListener("staticsearch:find",s=>{r=s.detail.search;let a=s.detail.result;t.innerHTML="";let u=e.content.cloneNode(!0),p=u.querySelector(".searchcount"),f=u.querySelector(".searchterm");p&&(p.textContent=a.length),f&&(f.textContent=r),t.appendChild(u);let h=document.createElement("ol");h.classList.add("searchlist"),a.forEach((o,E)=>{if(c&&E>=c)return;let i=n.content.cloneNode(!0),d=i.querySelector(".url"),S=i.querySelector(".title"),m=i.querySelector(".description");d&&(d.href=o.url,d.id=`staticsearchresult-${o.id}`),S&&(S.textContent=o.title),m&&(m.textContent=o.description),h.appendChild(i)}),t.appendChild(h),t.scrollTop=0},!1)}export{x as staticSearchInput,y as staticSearchQuery,g as staticSearchResult,q as staticSearchSetQuery};
