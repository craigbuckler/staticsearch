import{staticSearchQuery as r,staticSearchSetQuery as l,staticSearchInput as h,staticSearchResult as n}from"./__SSDIR__/staticsearch-bind.js";var a=class o extends HTMLElement{static path=new URL(import.meta.url).pathname.replace("__FILENAME__","");#t=null;#e=null;#i=null;constructor(){super()}connectedCallback(){let e=this.firstElementChild;e.setAttribute("part","startsearch"),this.attachShadow({mode:"open"});let s=document.createElement("link");s.rel="stylesheet",s.href=`${o.path}css/component.css`,this.shadowRoot.appendChild(s);let i=this.shadowRoot.appendChild(e);if(this.#o(),i.style.cursor="pointer",i.addEventListener("click",()=>this.#s()),window.addEventListener("keydown",t=>{t.key==="k"&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.#s())}),r()&&(this.#s(),location.hash)){let t=document.getElementById(location.hash.slice(1));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}}#s(){this.#t.open?this.#a():(this.#t.showModal(),this.setAttribute("aria-expanded","true"),this.#e.focus())}#a(){this.#t.close(),this.removeAttribute("aria-expanded"),l()}#o(){let e=document.createElement("dialog");e.setAttribute("part","dialog"),e.innerHTML=`
      <form method="dialog"><button part="close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path xmlns="http://www.w3.org/2000/svg" fill="currentColor" d="M5.3 5.3a1 1 0 0 1 1.4 0l5.3 5.3 5.3-5.3a1 1 0 1 1 1.4 1.4L13.4 12l5.3 5.3a1 1 0 0 1-1.4 1.4L12 13.4l-5.3 5.3a1 1 0 0 1-1.4-1.4l5.3-5.3-5.3-5.3a1 1 0 0 1 0-1.4Z"/></svg></button></form>
      <search>
        <label for="search" part="searchlabel">${this.getAttribute("label")||"search"}</label>
        <input type="search" id="search" name="q" minlength="2" maxlength="300" part="searchinput" />
      </search>
      <div id="results"></div>
    `,this.#t=this.shadowRoot.appendChild(e),this.#e=this.shadowRoot.querySelector("#search"),this.#i=this.shadowRoot.querySelector("#results"),n(this.#i,parseFloat(this.getAttribute("maxresults")||0)),h(this.#e),this.#t.addEventListener("close",()=>this.#a()),this.#t.addEventListener("click",s=>{this.#t.open&&s.target===this.#t&&this.#a()})}};customElements.define("static-search",a);
