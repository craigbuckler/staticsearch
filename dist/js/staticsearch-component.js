import{staticSearchQuery as l,staticSearchSetQuery as a,staticSearchInput as h,staticSearchResult as r}from"./__SSDIR__/staticsearch-bind.js";var s=class i extends HTMLElement{static path=new URL(import.meta.url).pathname.replace("__FILENAME__","");#t=null;#e=null;#i=null;constructor(){super()}connectedCallback(){let e=document.createElement("link");if(e.rel="stylesheet",e.href=`${i.path}css/component.css`,this.appendChild(e),this.#l(),this.firstElementChild.addEventListener("click",this),window.addEventListener("keydown",t=>{t.key==="k"&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.#s())}),l()&&(this.#s(),location.hash)){let t=document.getElementById(location.hash.slice(1));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}}handleEvent(e){this.#s()}#s(){this.#t.open?this.#t.close():(this.#t.showModal(),this.#e.focus())}#l(){let e=document.createElement("dialog");e.innerHTML=`
      <form method="dialog"><button class="close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path xmlns="http://www.w3.org/2000/svg" fill="currentColor" d="M5.3 5.3a1 1 0 0 1 1.4 0l5.3 5.3 5.3-5.3a1 1 0 1 1 1.4 1.4L13.4 12l5.3 5.3a1 1 0 0 1-1.4 1.4L12 13.4l-5.3 5.3a1 1 0 0 1-1.4-1.4l5.3-5.3-5.3-5.3a1 1 0 0 1 0-1.4Z"/></svg></button></form>
      <search>
        <label for="search">${this.getAttribute("label")||"search"}</label>
        <input type="search" id="search" name="q" minlength="2" maxlength="300" />
      </search>
      <div id="search-results"></div>
    `,this.#t=this.appendChild(e),this.#e=this.querySelector("#search"),this.#i=this.querySelector("#search-results"),r(this.#i,parseFloat(this.getAttribute("maxresults")||0)),h(this.#e),this.#t.addEventListener("close",()=>{a()}),this.#t.addEventListener("click",t=>{this.#t.open&&t.target===this.#t&&this.#t.close()})}};customElements.define("static-search",s);
