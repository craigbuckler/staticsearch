function p(i){let y={skis:"ski",skies:"sky",dying:"die",lying:"lie",tying:"tie",idly:"idl",gently:"gentl",ugly:"ugli",early:"earli",only:"onli",singly:"singl"},f=["sky","news","howe","atlas","cosmos","bias","andes"],g=["inning","outing","canning","herring","earring","proceed","exceed","succeed"],o=["bb","dd","ff","gg","mm","nn","pp","rr","tt"],e,s;if(i.length<=2||f.indexOf(i)!==-1)return i;if(y[i])return y[i];i=i.replace(/^y|([aeiouy])y/,"$1Y"),i=i.replace(/^'/,"");let h=/^(gener|commun|arsen)(\w*?[aeiouy][^aeiouy])?(\w*)$/,b=/^(\w*?[aeiouy][^aeiouy])(\w*?[aeiouy][^aeiouy])?(\w*)$/,$=h.exec(i)||b.exec(i)||[];if($[1]&&$[1].length<i.length?e=$[1].length:e=1/0,$[2]&&$[1].length+$[2].length<i.length?s=$[1].length+$[2].length:s=1/0,i=i.replace(/'s'$|'s$|'$/,""),i=u(i,[[/sses$/,"ss"],[/(\w{2,})(ie[d|s])$/,"$1i"],[/(\ie[d|s])$/,"ie"],[/(us|ss)$/,"$1"],[/([aeiouy]\w+)(s)$/,"$1"]]),g.indexOf(i)!==-1)return i;return i=u(i,[[/eedly$/,"ee",e,5],[/(\w*[aeiouy]\w*)ingly$/,c],[/(\w*[aeiouy]\w*)edly$/,c],[/eed$/,"ee",e,3],[/(\w*[aeiouy]\w*)ing$/,c],[/(\w*[aeiouy]\w*)ed$/,c]]),i=i.replace(/(\w+[^aeiouy])([yY])$/,"$1i"),e!==1/0&&(i=u(i,[[/ational$/,"ate",e,7],[/fulness$/,"ful",e,7],[/iveness$/,"ive",e,7],[/ization$/,"ize",e,7],[/ousness$/,"ous",e,7],[/biliti$/,"ble",e,6],[/lessli$/,"less",e,6],[/tional$/,"tion",e,6],[/(?:alism|aliti)$/,"al",e,5],[/ation$/,"ate",e,5],[/entli$/,"ent",e,5],[/fulli$/,"ful",e,5],[/iviti$/,"ive",e,5],[/ousli$/,"ous",e,5],[/abli$/,"able",e,4],[/alli$/,"al",e,4],[/anci$/,"ance",e,4],[/ator$/,"ate",e,4],[/enci$/,"ence",e,4],[/izer$/,"ize",e,4],[/bli$/,"ble",e,3],[/(l)ogi$/,"$1og",e,3],[/([cdeghkmnrt])li$/,"$1",e,2]]),i=u(i,[[/ational$/,"ate",e,7],[/tional$/,"tion",e,6],[/alize$/,"al",e,5],[/ative$/,"",s,5],[/(?:icate|iciti)$/,"ic",e,5],[/ical$/,"ic",e,4],[/ness$/,"",e,4],[/ful$/,"",e,3]]),s!==1/0&&(i=u(i,[[/ement$/,"",s,5],[/(?:able|ance|ence|ible|ment)$/,"",s,4],[/(?:ant|ate|ent|ism|iti|ive|ize|ous)$/,"",s,3],[/([s|t])ion$/,"$1",s,3],[/(?:al|er|ic)$/,"",s,2]])),i=u(i,[[/(^[aeiouy][^aeiouy]|[^aeiouy][aeiouy][^aeiouywxY])?e$/,x],[/(l)l$/,"$1",s,1]])),i=i.replace(/Y/,"y"),i;function u(a,l){let n=a.length;for(let t=0,m=l.length;t<m;t++)if(l[t][0].test(a))return n-l[t][3]<l[t][2]?a:a.replace(l[t][0],l[t][1]);return a}function r(a,l){return a[l]?!1:/(^[aeiouy][^aeiouy])|([aeiouy][^aeiouywxY]$)/.test(a)}function c(a,l){let n=l,t=n.substring(n.length-2);return["at","bl","iz"].indexOf(t)!==-1?n=n+"e":o.indexOf(t)!==-1?n=n.substring(0,n.length-1):r(n,e)&&(n=n+"e"),n}function x(a,l,n,t){return t.length-1>=s?l||"":!l&&t.length-1>=e?"":a}}export{p as stem};
