var c={skis:"ski",skies:"sky",dying:"die",lying:"lie",tying:"tie",idly:"idl",gently:"gentl",ugly:"ugli",early:"earli",only:"onli",singly:"singl"},h=["sky","news","howe","atlas","cosmos","bias","andes"],r=["inning","outing","canning","herring","earring","proceed","exceed","succeed"],b=["bb","dd","ff","gg","mm","nn","pp","rr","tt"];function s(i,e){for(var n=i.length,t=0,f=e.length;t<f;t++)if(e[t][0].test(i))return n-e[t][3]<e[t][2]?i:i.replace(e[t][0],e[t][1]);return i}function x(i,e){return i[e]?!1:/(^[aeiouy][^aeiouy])|([aeiouy][^aeiouywxY]$)/.test(i)}function m(i){var e,n;if(i.length<=2||h.indexOf(i)!==-1)return i;if(c[i])return c[i];i=i.replace(/^y|([aeiouy])y/,"$1Y"),i=i.replace(/^'/,"");let t=/^(gener|commun|arsen)(\w*?[aeiouy][^aeiouy])?(\w*)$/,f=/^(\w*?[aeiouy][^aeiouy])(\w*?[aeiouy][^aeiouy])?(\w*)$/;var a=t.exec(i)||f.exec(i)||[];if(a[1]&&a[1].length<i.length?e=a[1].length:e=1/0,a[2]&&a[1].length+a[2].length<i.length?n=a[1].length+a[2].length:n=1/0,i=i.replace(/'s'$|'s$|'$/,""),i=s(i,[[/sses$/,"ss"],[/(\w{2,})(ie[d|s])$/,"$1i"],[/(ie[d|s])$/,"ie"],[/(us|ss)$/,"$1"],[/([aeiouy]\w+)(s)$/,"$1"]]),r.indexOf(i)!==-1)return i;return i=s(i,[[/eedly$/,"ee",e,5],[/(\w*[aeiouy]\w*)ingly$/,u],[/(\w*[aeiouy]\w*)edly$/,u],[/eed$/,"ee",e,3],[/(\w*[aeiouy]\w*)ing$/,u],[/(\w*[aeiouy]\w*)ed$/,u]]),i=i.replace(/(\w+[^aeiouy])([yY])$/,"$1i"),e!==1/0&&(i=s(i,[[/ational$/,"ate",e,7],[/fulness$/,"ful",e,7],[/iveness$/,"ive",e,7],[/ization$/,"ize",e,7],[/ousness$/,"ous",e,7],[/biliti$/,"ble",e,6],[/lessli$/,"less",e,6],[/tional$/,"tion",e,6],[/(?:alism|aliti)$/,"al",e,5],[/ation$/,"ate",e,5],[/entli$/,"ent",e,5],[/fulli$/,"ful",e,5],[/iviti$/,"ive",e,5],[/ousli$/,"ous",e,5],[/abli$/,"able",e,4],[/alli$/,"al",e,4],[/anci$/,"ance",e,4],[/ator$/,"ate",e,4],[/enci$/,"ence",e,4],[/izer$/,"ize",e,4],[/bli$/,"ble",e,3],[/(l)ogi$/,"$1og",e,3],[/([cdeghkmnrt])li$/,"$1",e,2]]),i=s(i,[[/ational$/,"ate",e,7],[/tional$/,"tion",e,6],[/alize$/,"al",e,5],[/ative$/,"",n,5],[/(?:icate|iciti)$/,"ic",e,5],[/ical$/,"ic",e,4],[/ness$/,"",e,4],[/ful$/,"",e,3]]),n!==1/0&&(i=s(i,[[/ement$/,"",n,5],[/(?:able|ance|ence|ible|ment)$/,"",n,4],[/(?:ant|ate|ent|ism|iti|ive|ize|ous)$/,"",n,3],[/([s|t])ion$/,"$1",n,3],[/(?:al|er|ic)$/,"",n,2]])),i=s(i,[[/(^[aeiouy][^aeiouy]|[^aeiouy][aeiouy][^aeiouywxY])?e$/,o],[/(l)l$/,"$1",n,1]])),i=i.replace(/Y/,"y"),i;function u(g,y){var l=y,$=l.substring(l.length-2);return["at","bl","iz"].indexOf($)!==-1?l=l+"e":b.indexOf($)!==-1?l=l.substring(0,l.length-1):x(l,e)&&(l=l+"e"),l}function o(g,y,l,$){return $.length-1>=n?y||"":!y&&$.length-1>=e?"":g}}export{m as stem};
